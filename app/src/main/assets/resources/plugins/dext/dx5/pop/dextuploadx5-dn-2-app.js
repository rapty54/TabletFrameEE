var svgh=new SVGHelper;var smax=0;var active=false;var hostId="";var setLang=false;var root=null;var main=null;var sizeGauge=null;var sizeArrow=null;var speedGauge=null;var speedArrow=null;var speedValue=null;var speedUnit=null;var txtAt=null;var txtFilename=null;var txtWaiting=null;var rectTotSize=null;var txtCurSendTime=null;var txtCurRemainTime=null;var txtTotTime=null;var txtCount=null;var title=null;var twait=null;function updateUILayout(){var s=root.getComputedSize();if(s.w>0||s.h>0){main.updateLayout(s.w,s.h)}}function updateCurSizeRate(rate){rate=rate/100;var r=85,seta=rate>0?180*rate:0,x=0,y=0,d="";if(seta<90){x=r-r*Math.cos(getRadians(seta));y=r*Math.sin(getRadians(seta));d="M48,164 a85,85 0 0,1 "+x+","+-y}else{x=r+r*Math.cos(getRadians(180-seta));y=r*Math.sin(getRadians(180-seta));d="M48,164 a85,85 0 0,1 "+x+","+-y}sizeGauge.att("d",d);sizeArrow.element.transform.baseVal.getItem(0).setRotate(seta,133,164)}function updateCurSpeed(s){if(s<0)s=0;if(smax==0)smax=s;else if(s>smax)smax=s;var rate=smax==0?0:s/smax,r=85,seta=180*rate,x=0,y=0,d="";if(seta<90){x=r-r*Math.cos(getRadians(seta));y=r*Math.sin(getRadians(seta));d="M48,164 a85,85 0 0,1 "+x+","+-y}else{x=r+r*Math.cos(getRadians(180-seta));y=r*Math.sin(getRadians(180-seta));d="M48,164 a85,85 0 0,1 "+x+","+-y}speedGauge.att("d",d);speedArrow.element.transform.baseVal.getItem(0).setRotate(seta,133,164)}function progress(t){var status=t.getDownloadStatus();updateCurSizeRate(status.currentRate);updateCurSpeed(status.totalRate<100?status.currentSpeed:0);rectTotSize.att("width",status.totalRate+"%");var strSpeed=getFriendlySpeed(status.totalRate<100?status.currentSpeed:0,1);var tokenSpeed=strSpeed.split(" ");if(status.totalRate<=100){rectTotSize.att("fill","#d7d7d7");txtFilename.css("display","block");txtWaiting.css("display","none");speedValue.replaceText(tokenSpeed[0]);speedUnit.replaceText(tokenSpeed[1]);txtAt.replaceText(status.currentName);txtFilename.replaceText(status.currentName);txtCurSendTime.replaceText(msecToTimeFormat(status.currentTime)+" ");txtCurRemainTime.replaceText(" "+msecToTimeFormat(status.remainedCurrentTime));txtTotTime.replaceText(msecToTimeFormat(status.totalTime)+" / "+msecToTimeFormat(status.remainedTotalTime));txtCount.replaceText(status.completeCount+" / "+status.totalCount)}if(status.totalRate>=100){setTimeout(function(){rectTotSize.att("fill","#4CAF50");txtFilename.css("display","none");txtWaiting.css("display","block");speedValue.replaceText(tokenSpeed[0]);speedUnit.replaceText(tokenSpeed[1]);txtAt.replaceText("");txtFilename.replaceText("");txtCurSendTime.replaceText(msecToTimeFormat(status.currentTime)+" ");txtCurRemainTime.replaceText(" "+msecToTimeFormat(status.remainedCurrentTime));txtTotTime.replaceText(msecToTimeFormat(status.totalTime)+" / "+msecToTimeFormat(status.remainedTotalTime));txtCount.replaceText(status.completeCount+" / "+status.totalCount);active=false},100)}else if(active&&status.totalRate<100){setTimeout(function(){progress(t)},100)}}document["stopUI"]=function(lazy){if(lazy){return!active}else{active=false;return true}};document["updateUI"]=function(t){if(!setLang){var rb=t.getResourceBundle();title.replaceText(rb.get("RB-POPDN-2-0001","_파일을 다운로드하는 중 입니다."));twait.replaceText(rb.get("RB-POPDN-2-0002","_마무리 작업을 대기하고 있습니다."));setLang=true}updateUILayout();smax=0;active=true;hostId=t.domObject.id;progress(t)};function onLoadHandler(_evt){root=svgh.getAsUnit("UIC-DEXTUPLOADX5-PROGRESSIVE");main=svgh.getAsUnit("UIC-MAIN-AREA");sizeGauge=svgh.getAsUnit("UIC-SIZE-GAUGE");sizeArrow=svgh.getAsUnit("UIC-SIZE-ARROW");speedGauge=svgh.getAsUnit("UIC-SPEED-GAUGE");speedArrow=svgh.getAsUnit("UIC-SPEED-ARROW");speedValue=svgh.getAsUnit("UIC-TXT-CURRENT-SPEED-VALUE"),speedUnit=svgh.getAsUnit("UIC-TXT-CURRENT-SPEED-UNIT"),txtAt=svgh.getAsUnit("UIC-AT-FILENAME"),txtFilename=svgh.getAsUnit("UIC-TXT-FILENAME"),txtWaiting=svgh.getAsUnit("UIC-TXT-WAIT"),rectTotSize=svgh.getAsUnit("UIC-TXT-TOTAL-SIZE"),txtCurSendTime=svgh.getAsUnit("UIC-TXT-CURRENT-TIME-SEND"),txtCurRemainTime=svgh.getAsUnit("UIC-TXT-CURRENT-TIME-REMAIN"),txtTotTime=svgh.getAsUnit("UIC-TXT-TOTAL-TIME-VALUE"),txtCount=svgh.getAsUnit("UIC-TXT-COUNT-VALUE");title=svgh.getAsUnit("UIC-TITLE-TXT");twait=svgh.getAsUnit("UIC-TXT-WAIT");svgh.getAsUnit("UIC-TITLE-BTN-CANCEL").bind("click",function(evt){evt.stopPropagation();evt.preventDefault();active=false;if(window.parent.dx5){window.parent.dx5.hideDownloadProgress(hostId,true);hostId=""}},false);updateUILayout();console.log("DX5: dextuploadx5-dn-2 loaded")}